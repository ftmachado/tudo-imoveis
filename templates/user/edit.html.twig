{% extends 'layout-admin.html.twig' %}

{% block breadcrumb %}Edit Usuário{% endblock %}

{% block extracss %}
<style>
.label{
    font-size: small;
}
</style>
{% endblock %}

{% block body %}
    <h1>Edit Usuário</h1>

    {{ include('user/_form.html.twig', {'button_label': 'Update'}) }}

    <a href="{{ path('user_index') }}">Voltar</a>

    {{ include('user/_delete_form.html.twig') }}
{% endblock %}

{% block extrajavascript %}
<script type="text/javascript">
    $(document).ready( function() {
        
        $("#user_fkEstadoId").on('change', function(){
            
            if (this.value != ''){

                $.ajax({
                    type: "POST",
                    url: "{{ path('pessoa_lista_cidades') }}",
                    cache: false,
                    data: {
                        'estadoId': this.value
                    }
                }).done(function(cities) {

                    let options = '';
                    $.each(cities, function(i, item){
                        options += '<option value="'+item['id']+'">'+item['nome']+'</option>';
                    });
                    
                    $("#user_fkCidadeId").empty().append(options);

                }).fail(function(){
                    console.log( 'Falha ao buscar as cidades.' );
                });

            }
        });
    });
</script>
{% endblock %}