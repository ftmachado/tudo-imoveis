{% extends 'layout-admin.html.twig' %}

{% block title %}New Imovel{% endblock %}

{% block body %}
    <h1>Create new Imovel</h1>

    {{ include('imovel/_form.html.twig') }}

    <a href="{{ path('imovel_index') }}">back to list</a>

{% endblock %}

{% block extrajavascript %}
<script type="text/javascript">
    $(document).ready( function() {
        
        $("#imovel_fkEstadoId").on('change', function(){

            $.ajax({
                type: "POST",
                url: "{{ path('pessoa_lista_cidades') }}",
                cache: false,
                data: {
                    'estadoId': this.value
                }
            }).done(function(cities) {

                let options = '';
                $.each(cities, function(i, item){
                    options += '<option value="'+item['id']+'">'+item['nome']+'</option>';
                });
                
                $("#imovel_fkCidadeId").empty().append(options);

            }).fail(function(){
                console.log( 'Falha ao buscar as cidades.' );
            });

        });

        // $('input[type="submit"]').on('click', function submitForms(){
        //     $('#form-imovel').submit();
        //     $('#form-dropzone').submit();
        // });
    });
</script>
{% endblock %}

{# 
        // Dropzone.options.dropzonejs = {
        // var myDropzone = new Dropzone("div#myDropzone", {
        //     url: "{{ path('imovel_new') }}",
        //     paramName: "file_upload_file", 
        //     parallelUploads: 10,
        //     maxFilesize: 5,  // MB
        //     uploadMultiple: true, // upload files in a single request
        //     maxFiles: 2,
        //     acceptedFiles: ".jpg, .jpeg, .png, .gif",
        //     addRemoveLinks: true,
        //     // Language Strings
		// 	dictFileTooBig: "Arquivo muito grande. O tamanho de máximo de upload é 5MB.",
		// 	dictInvalidFileType: "Formato de arquivo inválido!",
		// 	dictCancelUpload: "Cancelar",
		// 	dictRemoveFile: "Remove",
		// 	dictMaxFilesExceeded: "São permitidos apenas 10 arquivos por vez.",
        //     dictDefaultMessage: "Arraste seus arquivos para cá!"
        // });

        console.log(Dropzone);

    }); #}
